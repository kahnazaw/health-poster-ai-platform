# Statistics & Reporting Guide - ุฏููู ุงูุฅุญุตุงุฆูุงุช ูุงูุชูุงุฑูุฑ
## Guide for Statistics & Reporting Feature

---

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ | Overview

ุชู ุฅุถุงูุฉ ููุฒุฉ **Statistics & Reporting** (ุงูุฅุญุตุงุฆูุงุช ูุงูุชูุงุฑูุฑ) ูุชุชุจุน ุนุฏุฏ ุงูุจูุณุชุฑุงุช ุงููููุฏุฉ ูู ูู ูุฑูุฒ ุตุญู.

A new **Statistics & Reporting** feature has been added to track the number of posters generated by each health center.

---

## โ ุงูููุฒุงุช | Features

### 1. ุชุชุจุน ุชููุงุฆู | Automatic Tracking
- โ ูู ูุฑุฉ ูุชู ุชูููุฏ ุจูุณุชุฑุ ูุชู ุฒูุงุฏุฉ ุงูุนุฏุฏ ุชููุงุฆูุงู
- โ ูุนูู ูู ุงูุฎูููุฉ ุจุฏูู ุฅุจุทุงุก ุชูููุฏ ุงูุจูุณุชุฑุงุช
- โ ูุชุชุจุน ุฌููุน ุฃููุงุน ุงูุจูุณุชุฑุงุช (ุนุงุฏูุฉ + ุชุฑุญูุจูุฉ)

### 2. ููุทุฉ ููุงูุฉ ุงูุฅุญุตุงุฆูุงุช | Statistics Endpoint
- โ `GET /api/admin/statistics` - ุงูุญุตูู ุนูู ุฅุญุตุงุฆูุงุช ุฌููุน ุงููุฑุงูุฒ

### 3. ุชุตุฏูุฑ CSV | CSV Export
- โ `GET /api/admin/statistics/export` - ุชุญููู ุงูุชูุฑูุฑ ูููู CSV
- โ ุฌุงูุฒ ููุนุฑุถ ูู Excel
- โ ูุฏุนู ุงูุนุฑุจูุฉ (UTF-8)

---

## ๐ ูุงุนุฏุฉ ุงูุจูุงูุงุช | Database

### ุงูุนููุฏ ุงูุฌุฏูุฏ | New Column

ุชู ุฅุถุงูุฉ ุนููุฏ `posters_generated_count` ุฅูู ุฌุฏูู `user_profiles`:

```sql
ALTER TABLE user_profiles 
ADD COLUMN posters_generated_count INTEGER DEFAULT 0;
```

**ุงูููู:** `V2__add_posters_generated_count.sql`

---

## ๐ ููุงุท ุงูููุงูุฉ | Endpoints

### 1. ุงูุญุตูู ุนูู ุงูุฅุญุตุงุฆูุงุช | Get Statistics

**GET `/api/admin/statistics`**

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "totalCenters": 23,
  "totalPostersGenerated": 150,
  "centers": [
    {
      "centerId": "hc_center_01",
      "healthCenterName": "ุงููุฑูุฒ ุงูุตุญู ุงูุฃูู",
      "managerName": "ุฏ. ุฃุญูุฏ ูุญูุฏ ุนูู",
      "postersGeneratedCount": 12
    },
    ...
  ],
  "message": "ุฅุญุตุงุฆูุงุช ุงููุฑุงูุฒ ุงูุตุญูุฉ ุงูู 23"
}
```

### 2. ุชุตุฏูุฑ CSV | Export CSV

**GET `/api/admin/statistics/export`**

**ุงูุงุณุชุฌุงุจุฉ:**
- ููู CSV ูุงุจู ููุชุญููู
- ุชูุณูู: UTF-8 (ูุฏุนู ุงูุนุฑุจูุฉ)
- ุงุณู ุงูููู: `health-centers-statistics.csv`

**ูุญุชูู CSV:**
```csv
Center ID,Health Center Name,Manager Name,Posters Generated
hc_center_01,ุงููุฑูุฒ ุงูุตุญู ุงูุฃูู,ุฏ. ุฃุญูุฏ ูุญูุฏ ุนูู,12
hc_center_02,ุงููุฑูุฒ ุงูุตุญู ุงูุซุงูู,ุฏ. ูุงุทูุฉ ุญุณู,8
...
```

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู | How to Use

### 1. ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช | View Statistics

**ูู ุงููุชุตูุญ:**
```
http://localhost:8080/api/admin/statistics
```

**ุจุงุณุชุฎุฏุงู curl:**
```bash
curl http://localhost:8080/api/admin/statistics
```

### 2. ุชุญููู ุงูุชูุฑูุฑ | Download Report

**ูู ุงููุชุตูุญ:**
```
http://localhost:8080/api/admin/statistics/export
```

**ุจุงุณุชุฎุฏุงู curl:**
```bash
curl -X GET http://localhost:8080/api/admin/statistics/export \
  --output statistics.csv
```

### 3. ูุชุญ ูู Excel | Open in Excel

1. ุญููู ุงูููู CSV
2. ุงูุชุญู ูู Excel
3. ุณูุชู ุนุฑุถ ุงูุจูุงูุงุช ุจุดูู ุตุญูุญ (ูุฏุนู ุงูุนุฑุจูุฉ)

---

## ๐ง ุงูุชุชุจุน ุงูุชููุงุฆู | Automatic Tracking

### ููู ูุนูู | How It Works

1. **ุนูุฏ ุชูููุฏ ุจูุณุชุฑ ุนุงุฏู:**
   - ูุชู ุงุณุชุฏุนุงุก `POST /api/posters/generate`
   - ุงููุธุงู ูุฒูุฏ `posters_generated_count` ุชููุงุฆูุงู
   - ูุง ูุคุซุฑ ุนูู ุณุฑุนุฉ ุงูุงุณุชุฌุงุจุฉ

2. **ุนูุฏ ุชูููุฏ ุจูุณุชุฑ ุชุฑุญูุจู:**
   - ูุชู ุงุณุชุฏุนุงุก `GET /api/posters/welcome/{centerId}`
   - ุงููุธุงู ูุฒูุฏ `posters_generated_count` ุชููุงุฆูุงู
   - ูุง ูุคุซุฑ ุนูู ุณุฑุนุฉ ุงูุงุณุชุฌุงุจุฉ

### ุถูุงู ุงูุฌูุฏุฉ | Quality Assurance

- โ **ุบูุฑ ูุชุฒุงูู:** ุงูุชุชุจุน ูุง ูุจุทุฆ ุชูููุฏ ุงูุจูุณุชุฑุงุช
- โ **ุขูู:** ุฅุฐุง ูุดู ุงูุชุชุจุนุ ูุง ููุดู ุชูููุฏ ุงูุจูุณุชุฑ
- โ **ุชููุงุฆู:** ูุง ุญุงุฌุฉ ูุฅุฌุฑุงุก ูุฏูู

---

## ๐ ูุซุงู ุงูุงุณุชุฌุงุจุฉ | Example Response

### JSON Response:

```json
{
  "totalCenters": 23,
  "totalPostersGenerated": 245,
  "centers": [
    {
      "centerId": "hc_center_01",
      "healthCenterName": "ุงููุฑูุฒ ุงูุตุญู ุงูุฃูู",
      "managerName": "ุฏ. ุฃุญูุฏ ูุญูุฏ ุนูู",
      "postersGeneratedCount": 15
    },
    {
      "centerId": "hc_center_02",
      "healthCenterName": "ุงููุฑูุฒ ุงูุตุญู ุงูุซุงูู",
      "managerName": "ุฏ. ูุงุทูุฉ ุญุณู",
      "postersGeneratedCount": 12
    }
  ],
  "message": "ุฅุญุตุงุฆูุงุช ุงููุฑุงูุฒ ุงูุตุญูุฉ ุงูู 23"
}
```

### CSV File:

```csv
Center ID,Health Center Name,Manager Name,Posters Generated
hc_center_01,ุงููุฑูุฒ ุงูุตุญู ุงูุฃูู,ุฏ. ุฃุญูุฏ ูุญูุฏ ุนูู,15
hc_center_02,ุงููุฑูุฒ ุงูุตุญู ุงูุซุงูู,ุฏ. ูุงุทูุฉ ุญุณู,12
hc_center_03,ุงููุฑูุฒ ุงูุตุญู ุงูุซุงูุซ,ุฏ. ุฎุงูุฏ ุฅุจุฑุงููู,10
...
```

---

## ๐ฏ ุญุงูุงุช ุงูุงุณุชุฎุฏุงู | Use Cases

1. **ุนุฑุถ ููุฅุฏุงุฑุฉ:** ุนุฑุถ ุฅุญุตุงุฆูุงุช ูููุฏูุฑูุฉ
2. **ุชูุฑูุฑ ุดูุฑู:** ุชุตุฏูุฑ CSV ูุชูุฑูุฑ ุดูุฑู
3. **ูุชุงุจุนุฉ ุงูุฃุฏุงุก:** ูุนุฑูุฉ ุฃู ูุฑูุฒ ููุชุฌ ุฃูุซุฑ
4. **ุงูุชุฎุทูุท:** ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ููุชุฎุทูุท ุงููุณุชูุจูู

---

## โ๏ธ ุงูุฅุนุฏุงุฏ | Setup

### 1. ุชุดุบูู Migration:

```sql
-- ุดุบูู ููู: V2__add_posters_generated_count.sql
ALTER TABLE user_profiles 
ADD COLUMN IF NOT EXISTS posters_generated_count INTEGER DEFAULT 0;
```

### 2. ุฅุนุงุฏุฉ ุชุดุบูู ุงูุชุทุจูู:

```bash
mvn spring-boot:run
```

### 3. ุงูุชุญูู:

```bash
# ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช
curl http://localhost:8080/api/admin/statistics

# ุชุญููู CSV
curl http://localhost:8080/api/admin/statistics/export --output stats.csv
```

---

## โจ ุงูุฎูุงุตุฉ | Summary

**ุงูููุฒุฉ ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู!**

**Feature is ready to use!**

**ุงููููุฒุงุช:**
- โ ุชุชุจุน ุชููุงุฆู ูุฌููุน ุงูุจูุณุชุฑุงุช
- โ ููุทุฉ ููุงูุฉ ููุฅุญุตุงุฆูุงุช
- โ ุชุตุฏูุฑ CSV ููุนุฑุถ ูู Excel
- โ ูุนูู ูู ุงูุฎูููุฉ ุจุฏูู ุฅุจุทุงุก

**Features:**
- โ Automatic tracking of all posters
- โ Statistics endpoint
- โ CSV export for Excel
- โ Runs in background without slowing down

---

**ุชู ุงูุชุทููุฑ ูุฏุงุฆุฑุฉ ุตุญุฉ ูุฑููู โ ูุทุงุน ูุฑููู ุงูุฃูู**  
**Developed for Kirkuk Health Directorate - First Sector**

